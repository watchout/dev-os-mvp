# 確信レベル（Confidence Level）UI設計書

> **旧称**: Vibe Score  
> **命名変更理由**: 否定的な印象を与える「Vibe Score」から、ポジティブな「確信レベル」へ変更

## 1. コンセプト

### 1.1 目的
ユーザーの指示が「バイブコーディング（曖昧な指示）」なのか「確信に満ちた指示」なのかを可視化し、改善を促す。

### 1.2 マーケティング観点からの要件
- **肯定的な体験**: 「あなたの指示は曖昧です」ではなく「確信レベルを上げましょう」
- **改善の示唆**: 具体的なアクションを提示
- **Before/After可視化**: LP・SNSの訴求材料として活用可能

---

## 2. UI設計

### 2.1 確信レベルインジケーター

```
┌─────────────────────────────────────────────────────────────┐
│  🎯 確信レベル: 32%                                          │
│  ▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  │
│                                                              │
│  📍 現在の状態: バイブコーディング                            │
│  🎯 目標状態: 確信に満ちた設計                                │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 確信レベルの段階

| レベル | スコア | 状態 | 色 | アイコン |
|--------|--------|------|-----|----------|
| 1 | 0-20% | 🌊 漂流中（Vibe） | 赤 | 🌊 |
| 2 | 21-40% | 🌤️ 方向性あり | オレンジ | 🌤️ |
| 3 | 41-60% | ⛅ 輪郭が見える | 黄 | ⛅ |
| 4 | 61-80% | ☀️ 明確化 | 黄緑 | ☀️ |
| 5 | 81-100% | 🎯 確信 | 緑 | 🎯 |

### 2.3 改善ヒントパネル

```
┌─────────────────────────────────────────────────────────────┐
│  💡 確信レベルを上げるヒント                                  │
│                                                              │
│  ⚠️ 検出された曖昧な表現:                                     │
│                                                              │
│  • 「いい感じに」→ 具体的な完了条件を追加                     │
│     例: 「ログイン後にダッシュボードへリダイレクト」          │
│                                                              │
│  • 「適切に処理」→ エッジケースを定義                        │
│     例: 「無効なトークンの場合は401エラーを返す」             │
│                                                              │
│  • データ構造が未定義 → SSOTに追加                           │
│     例: ssot/features.yml に User エンティティを定義          │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  [SSOTを整えて確信レベルを上げる →]                      │  │
│  └────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

### 2.4 Before/After 比較モード

```
┌───────────────────────────────────┬───────────────────────────────────┐
│         ❌ Before (32%)           │          ✅ After (87%)            │
├───────────────────────────────────┼───────────────────────────────────┤
│                                   │                                   │
│  「ログイン機能をいい感じに        │  「ログイン機能を実装」            │
│   作って」                        │                                   │
│                                   │  【完了条件】                     │
│  → AIが迷走                       │  - メール/パスワード認証          │
│  → 仕様の抜け漏れ                 │  - JWTトークン発行               │
│  → 手直し地獄                     │  - 有効期限: 24時間              │
│                                   │  - リフレッシュトークン対応       │
│                                   │                                   │
│                                   │  【エッジケース】                 │
│                                   │  - 無効なメール → 400            │
│                                   │  - パスワード不一致 → 401        │
│                                   │  - アカウントロック → 403        │
│                                   │                                   │
│                                   │  → AIが一発で正解を出力          │
│                                   │  → テストも自動生成              │
│                                   │                                   │
└───────────────────────────────────┴───────────────────────────────────┘
```

---

## 3. 曖昧さ検出ロジック

### 3.1 検出パターン

| カテゴリ | 検出パターン | 減点 |
|----------|--------------|------|
| **曖昧表現** | 「いい感じに」「適切に」「うまく」 | -15 |
| **未定義参照** | 存在しないSSOTエンティティへの言及 | -20 |
| **スコープ不明確** | 変更範囲が特定できない | -10 |
| **完了条件欠如** | 「〜して」のみで条件なし | -15 |
| **エッジケース欠如** | エラーハンドリングの言及なし | -10 |

### 3.2 加点パターン

| カテゴリ | 検出パターン | 加点 |
|----------|--------------|------|
| **SSOT参照** | `ssot/*.yml` への明示的参照 | +20 |
| **完了条件明示** | 「〜の場合、〜する」形式 | +15 |
| **エッジケース定義** | エラーケースの言及 | +15 |
| **テスト条件** | テスト観点の明示 | +10 |
| **ガバナンス考慮** | 認証・権限・監査への言及 | +20 |

---

## 4. マーケティング活用

### 4.1 LP での訴求

```html
<!-- Before/After セクション -->
<div class="confidence-demo">
  <div class="before">
    <h3>❌ バイブコーディング</h3>
    <div class="score low">確信レベル: 32%</div>
    <p>「いい感じにログイン機能作って」</p>
  </div>
  <div class="arrow">→</div>
  <div class="after">
    <h3>✅ SSOT駆動開発</h3>
    <div class="score high">確信レベル: 87%</div>
    <p>仕様を整えただけで、AIの出力が劇的に変わる</p>
  </div>
</div>
```

### 4.2 SNS投稿用テンプレート

```
確信レベル 32% → 87% 📈

「いい感じにログイン機能作って」
→ AIが迷走、結局2時間の手直し

「SSOTに基づきログイン機能を実装」
→ 5分で完了、テストも自動生成

仕様を整えるだけで、開発が変わる。

#AI開発 #devOS #確信レベル
```

### 4.3 Zenn/note 記事テーマ

- 「確信レベル」でAI開発の品質を可視化する
- バイブコーディングの限界を「確信レベル」で数値化してみた
- なぜ「確信レベル」が低いとAIは迷走するのか？

---

## 5. 実装ロードマップ

| Phase | 内容 | 優先度 |
|-------|------|--------|
| Phase 2.1 | 基本スコアリングエンジン実装 | 🔴 高 |
| Phase 2.2 | UI コンポーネント実装 | 🔴 高 |
| Phase 2.3 | 改善ヒント生成 | 🟡 中 |
| Phase 2.4 | Before/After 比較モード | 🟡 中 |
| Phase 3.0 | マーケティング素材自動生成 | 🟢 低 |

---

## 6. 設計AI（Iza）への技術要件

### 6.1 必要なSSOT更新

```yaml
# ssot/governance.yml に追加
confidence_scoring:
  enabled: true
  thresholds:
    vibe: 40          # これ以下は「バイブコーディング」警告
    confident: 80     # これ以上で「確信」状態
  
  penalties:
    vague_expression: -15
    undefined_reference: -20
    unclear_scope: -10
    missing_completion: -15
    missing_edge_case: -10
  
  bonuses:
    ssot_reference: +20
    completion_condition: +15
    edge_case_defined: +15
    test_condition: +10
    governance_aware: +20
```

### 6.2 API設計

```typescript
// POST /api/confidence/analyze
interface ConfidenceAnalysisRequest {
  instruction: string;
  context?: {
    ssot_files?: string[];
    project_id?: string;
  };
}

interface ConfidenceAnalysisResponse {
  score: number;                    // 0-100
  level: 'vibe' | 'emerging' | 'clear' | 'defined' | 'confident';
  issues: ConfidenceIssue[];
  suggestions: ConfidenceSuggestion[];
  before_after?: BeforeAfterComparison;
}

interface ConfidenceIssue {
  type: 'vague_expression' | 'undefined_reference' | 'unclear_scope' | 'missing_completion' | 'missing_edge_case';
  text: string;           // 問題のある箇所
  penalty: number;        // 減点
  position: { start: number; end: number };
}

interface ConfidenceSuggestion {
  original: string;       // 元の表現
  suggested: string;      // 改善案
  reason: string;         // 理由
  ssot_reference?: string; // 関連SSOT
}
```

---

**作成日**: 2026-01-06  
**作成者**: マーケティングAI（Nami/Sun）  
**承認待ち**: 設計AI（Iza）

