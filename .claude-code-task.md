# Claude Code タスク指示書

## プロジェクト情報
- **リポジトリ**: dev-os-mvp
- **作業ディレクトリ**: `/Users/kaneko/dev-os-mvp/apps/platform`
- **担当**: Claude Code（E2E/テスト担当）

---

## 現在の状態
- Phase 3 開始済み（PR必須ルール有効）
- STRIPE-01 マージ済み（Stripe環境変数は未設定）
- 基本機能は実装完了
- UI目視確認は Cursor AI で完了済み

---

## タスク一覧

### Task 1: 環境確認・ヘルスチェック
```bash
cd /Users/kaneko/dev-os-mvp/apps/platform
npm run typecheck
npm run lint
npm run test
npm run devos:selfcheck
```

### Task 2: 全APIエンドポイント疎通確認
以下のAPIを curl または fetch でテスト（認証が必要なものはスキップ可）:

```
GET  /api/health              # ヘルスチェック（存在すれば）
GET  /api/organizations       # 組織一覧
GET  /api/organizations/[id]  # 組織詳細
GET  /api/organizations/[id]/members
GET  /api/organizations/[id]/projects
GET  /api/organizations/[id]/keys
GET  /api/organizations/[id]/executions
POST /api/stripe/checkout     # Stripe（環境変数なしでエラー確認）
POST /api/stripe/portal       # Stripe（環境変数なしでエラー確認）
```

### Task 3: Stripe 環境変数テンプレート作成
`apps/platform/env.template` を確認し、Stripe関連の環境変数が記載されているか確認。
不足していれば追加:

```
# Stripe
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_PRICE_PRO_MONTHLY=price_xxx
STRIPE_PRICE_PRO_ANNUAL=price_xxx
STRIPE_PRICE_TEAM_MONTHLY=price_xxx
STRIPE_PRICE_TEAM_ANNUAL=price_xxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx
```

### Task 4: 結果報告
以下の形式で報告:

```markdown
## テスト結果サマリー

### 環境チェック
- typecheck: ✅/❌
- lint: ✅/❌
- test: ✅/❌
- selfcheck: ✅/❌

### API疎通
| エンドポイント | ステータス | 備考 |
|--------------|----------|------|
| GET /api/xxx | ✅/❌ | ... |

### 発見した問題
1. ...
2. ...

### 推奨アクション
1. ...
2. ...
```

---

## 参照ドキュメント
- `docs/DEV_RULES.md` - Section 6: AIツール役割分担
- `ssot/governance.yml` - ai_tool_roles セクション

---

## 注意事項
- **Stripe 関連はエラーになることが想定される**（環境変数未設定のため）
- エラーが想定通りかどうかを確認すること
- 問題発見時は修正案を提示（実装は Cursor AI に引き継ぎ）
